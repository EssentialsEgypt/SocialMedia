"use strict";(()=>{var e={};e.id=860,e.ids=[860],e.modules={8667:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},27010:(e,n,t)=>{t.r(n),t.d(n,{config:()=>m,default:()=>d,routeModule:()=>g});var a={};t.r(a),t.d(a,{default:()=>c});var o=t(33480),r=t(8667),i=t(86435);let s={gen_z:{tone:"casual",emojis:!0,slang:!0,urgency:"medium"},millennial:{tone:"friendly",emojis:!0,slang:!1,urgency:"medium"},gen_x:{tone:"professional",emojis:!1,slang:!1,urgency:"low"},vip:{tone:"loyalty",emojis:!1,slang:!1,urgency:"high"},abandoned_cart:{tone:"friendly",emojis:!0,slang:!1,urgency:"high"}},u={product_view:{gen_z:["Yo! \uD83D\uDD25 {product_name} is calling your name!","Don't sleep on this drop \uD83D\uDCAF","This is the vibe you've been looking for âœ¨"],millennial:["Hey! We noticed you're interested in {product_name} \uD83D\uDE0A","This {product_name} would look amazing on you!","Don't miss out on this one \uD83D\uDC40"],gen_x:["We noticed your interest in {product_name}","This item is currently in stock","Would you like to complete your purchase?"],vip:["Exclusive VIP access: {product_name}","As a valued customer, enjoy early access to {product_name}","Special VIP pricing just for you on {product_name}"]},cart_abandon:{abandoned_cart:["Your cart is waiting for you! \uD83D\uDED2","Don't let these items get away!","Complete your purchase and save! \uD83D\uDCB0"]},checkout_fail:{abandoned_cart:["Having trouble? We're here to help! \uD83E\uDD1D","Let us assist with your checkout","Need help? Our team is ready! \uD83D\uDCDE"]}},l={gen_z:"whatsapp",millennial:"whatsapp",gen_x:"email",vip:"email",abandoned_cart:"whatsapp"};async function c(e,n){if("POST"!==e.method)return n.status(405).json({error:"Method not allowed"});try{let{customerId:t,segment:a,triggerType:o,productInfo:r,previousMessages:i,language:c="en"}=e.body;if(!t||!a||!o)return n.status(400).json({error:"Missing required fields"});let d=s[a]||s.millennial,m=u[o]?.[a]||u.product_view.millennial,g=m[Math.floor(Math.random()*m.length)];r?.name&&(g=g.replace("{product_name}",r.name)),"high"===d.urgency&&(g+=" Limited time offer! â°"),d.emojis||(g=g.replace(/[ðŸ”¥ðŸ’¯âœ¨ðŸ˜ŠðŸ‘€ðŸ›’ðŸ’°ðŸ¤ðŸ“žâ°]/g,""));let p=l[a]||"whatsapp";"ar"===c&&(g=(g=(g=g.replace("Hey!","Ù…Ø±Ø­Ø¨Ø§Ù‹!")).replace("We noticed","Ù„Ø§Ø­Ø¸Ù†Ø§")).replace("Don't miss out","Ù„Ø§ ØªÙÙˆØª"));let h={message:g.trim(),tone:d.tone,channel:p,urgency:d.urgency};return console.log("AI Message Generated:",{customerId:t,segment:a,triggerType:o,message:h.message,tone:h.tone,channel:h.channel,timestamp:new Date().toISOString()}),n.status(200).json(h)}catch(e){return console.error("Error generating AI message:",e),n.status(500).json({error:"Failed to generate AI message"})}}let d=(0,i.M)(a,"default"),m=(0,i.M)(a,"config"),g=new o.PagesAPIRouteModule({definition:{kind:r.A.PAGES_API,page:"/api/ai-auto-messages/generate-message",pathname:"/api/ai-auto-messages/generate-message",bundlePath:"",filename:""},userland:a})},33480:(e,n,t)=>{e.exports=t(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,t){return t in n?n[t]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,t)):"function"==typeof n&&"default"===t?n:void 0}}})}};var n=require("../../../webpack-api-runtime.js");n.C(e);var t=n(n.s=27010);module.exports=t})();